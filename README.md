## Если не известно сколько ждать появление элемента в дом модели, то пока лучшим решением которое я нашел является рекурсивный поиск этого элемента. Главное преимущствое рекурсивного поиска - проверка каждую секунду не появился ли элемент. Если да - прекращение поиска и продолжение работы самого теста. Сравним с await page.waitForTimeout(5000) - гарантирование зависание теста на 5 секунд и нет уверенности что элемент таки появится. Сыылка на гитхаб github.com/maxrexfax/playwrightTimeouts
# Пример кода на гитхабе содержит закомментированную строку await page.waitForSelector('data-testid="div-id-third"', {timeout: 10000}); - если ее раскомментировать ничего не изменится. Плейрайт не будет ждать и спокойно упадет. Если раскомментировать строку await page.waitForTimeout(5000); то ошибки не будет только при условии что элемент на странице появится менее чем за 5 секунд. Это лишние траты времени и каждый раз неизвестность - хватит ли такого жестко заданного времени для того чтобы элемент отрендерился. Рекурсивная функция проверяет раз в секунду в течение 10 секунд, если элемент появится на первой то цикл сразу разорвется и 10 секунд уже ждать не придется. Вопрос к знатокам - есть ли более удобное решение?
## If you don't know how long to wait for an item to appear in the DOM model the best solution I have found so far is to recursively search for it. The main advantage of recursive search is that it checks every second if the element has appeared. If yes, the search is stopped and the test itself continues. Let's compare it with await page.waitForTimeout(5000) - it guarantees that the test will hang for 5 seconds and there is no assurance that the item will appear.
# The sample code on github contains the commented line await page.waitForSelector('data-testid="div-id-third"', {timeout: 10000}); - if it is uncommented nothing will change. Playwright will not wait and will quietly drop. If you uncomment the line await page.waitForTimeout(5000); then there will be no error only if the element on the page will appear in less than 5 seconds. This is an unnecessary waste of time and every time you don't know whether such a rigidly set time is enough for the element to render. The recursive function checks once a second for 10 seconds, if the element appears on the first one, the cycle will immediately break and 10 seconds will not have to wait. Question to experts - is there a more convenient solution?
